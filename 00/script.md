```cpp
Hoge a;
Hoge b{std::move(a)};
```

(？？？？？？？？？？

「まじわかんない……

「さて, そろそろ帰りますか……

ねねから電話がかかってくる

「はい, うみこですが

「もしもし, ねねです♪今だいじょうぶですかー？

「いいですよ, なんですか

「C++ の std::move とかいうやつがわかんないんですけどー

*OP*

「こういうものかと思ったんですけど……？

```cpp
int a = 1;
int b = std::move(a);
```

「あー, ……それだと意味ないですね

「そーなんですかー？

「えぇ, インスタンスとかじゃないと効果がありませんね

「そうだったのか……どういう仕組みなの？これ

「先に所有権に慣れておきましょうか

「ファイルを開いたり, メモリを確保したり, …こういったリソースの確保は, その後に解放をしたいことが往々にしてあります

「`new` で確保する場合も 1 回だけ `delete` しないといけないんですよね

「所有権は, 誰か 1 人だけがリソース 1 つを管理する権利のことです

「誰か 1 人だけ?

「そうです. 基本的にはスレッドにあたりますね

「

「ムーブセマンティクスとは

「

*アイキャッチ*

「それでは, 先ほどの概念を扱うための C++ の言語機能に触れていきますね

「ムーブがなかったころは, この 2 択を迫られてました

1. 不整合を回避するためにコピー構築を手動実装する
2. クラス作者が不整合に気をつけてコピー構築の箇所でコピー元を null 化する


「ムーブ構築ができたことで, 整合性を保ちながらムーブセマンティクスが実現できるようになりました

「rvalue 参照



「



「こちらは unique_ptr の例です

「

```cpp

```


vector の例

「

```cpp

```


「ただし, 戻り値型に rvalue 参照型を使ってはいけません

```cpp

```

「原理的には, 以下のことをしているだけですね

1. スタック領域上のバイト列だけをコピーする
2. コピー元の解放処理をやらないようにする

「代入するとき勝手に全部コピーされるんじゃなくて、代入がムーブになる言語があったらいいのになー

「Rust という言語なら, ムーブがデフォになっていますね

「仕事で使ったりはしていませんが, システムプログラミング言語としては人気のようです

「ググってみたら, Stack Overflow の愛されてる言語ランキングで 4 年連続 1 位なんだって！

「C++ と似た部分が多いので, ねねさんみたいな物好きなら趣味でやっても楽しいと思いますよ

「Rust ってやつやってみます♪ありがとうございました

*ED*

ねねっち on SNS

「Rustマジで何しようとしてもコンパイルエラー出る

「Rust楽しい、、、

「Rust、言う事聞いてくれたときは嬉しい
そもそもコンパイルが通った時点で喜ぶ

「Rust、超難しい言語なんだろうなと勝手に思ってたけど、実際少し難しいけどコンパイラがめちゃくちゃ優しくて救いの手を差し伸べてくれるので、多分みんなやれば出来ると思う

（何か悪い影響を与えてしまったような気がする…）

---

動画: Mikuro さいな
監修: かわえもん

参考文献:

- Rust (プログラミング言語) - Wikipedia https://ja.wikipedia.org/wiki/Rust_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E)
- Rust Programming Language https://www.rust-lang.org/
- The Rust Programming Language a.k.a. "The Book" https://doc.rust-lang.org/book/

---
