# はじめに

こにゃにゃちわ～, さいなです.

以前 C++ の解説動画を投稿していたものです.

リハビリも兼ねまして Rust というプログラミング言語の解説動画を制作する運びとなりました.

私はあまり Rust に造詣が深い訳ではないため, かわえもんの監修でお送りします.

# Rust について

Rust は比較的最近できたシステムプログラミング言語.

とにかく論理的に安全になるように作られているよ. それでいて, 極限まで速いチューニングもできる. だから低水準かつ高度なシステム構築に向いてる.

ただ, サードパーティのライブラリに不安定な物が多かったり, 安全性を実現するための概念が多くて学習が大変なのが玉に瑕.

この動画シリーズでは, そんな Rust 特有のむつかしいなんやかんやを, 文章ではなく動画で視覚的に解説していくよ. だから多少の基本的なプログラミング知識 (四則演算や論理演算) は省いて解説していくね.

Rust で開発するにはもちろん環境構築が必要だけど, そこらへんは調べたらいくらでも出てくるので省略させてもらいまーす.

# Hello, world!

まず, Cargo を使ってプロジェクトを作るぞ.

```sh
cargo new (好きなプロジェクト名)
```

これでひな形が作られる. `src/main.rs` にすでに Hello, world! が用意されてるのだ. 便利な世の中になったもんだねぇ.

```rust
fn main() {
    println!("Hello, world!");
}
```

んじゃこれを実行してみよう.

```sh
cargo run
```

ここまでうまくいったらこう喜んでおくんだ, YATTA!

```
Hello, world!
```

ささ, Rust の世界にようこそだね!

# main 関数

さっきのコードが Rust のプログラムだよ. そこは大丈夫だよね?

```rust
fn main() {
  // ...
}
```

こういう部分を `main` 関数っていうよ. Rust のプログラムはここから始まるんだ.

プログラムを実行すると, この `main` 関数の中に書いた処理を上から順に実行していくよ.

```rust
fn main() {
  処理1;
  処理2;
  処理3;
  // :
  // :
}
```

あと, コメントが書けるよ. こいつはプログラムの処理では無いけれど, プログラムだけでは表現できないような情報を記すのに使うよ.

```rust
コメントじゃない;
// 行末までコメント
コメントじゃない;
/* ここからコメント
  ずっとコメント
  /*
    ここもコメント
  */
ここまでコメント */
コメントじゃない;
```

プログラムの説明に使う特殊なコメントもあるけど, それは第 6 回で詳しく解説する予定っす.

# let

Rust での変数定義はこうする.

```rust
let hoge = 0;
```

変数といっても, Rust ではデフォルトで不変.

```rust
let hoge = 0;
hoge = 1; // コンパイルエラー
```

じゃあ変わる数じゃねぇじゃんって思うけど, immutable variable って呼ばれてるから変数だよ.

あと, 他の言語と違って `,` で区切って複数の変数を定義したりはできない.

```rust
let a = 0, b = 1; // コンパイルエラー
```

素直に分けるのが無難.

```rust
let a = 0;
let b = 1;
```

# mut

変数名の前に `mut` を付けることで初めて可変になるぞ.

```rust
let mut fuga = 0;
fuga = 2;
```

だからってなんでもかんでも可変にしなくても, 基本的に不変で問題ない. コードが見やすくなったりと, いいことだらけだし.

だから, コンパイルしてみて「不変だからこれ無理だぞ」ってコンパイラに言われてから可変にする感じでいい. Rust コンパイラはかしこいのだ.

# 基本的なデータ型

Rust には, 整数, 浮動小数点数, 真偽値, 文字, 文字列の型が用意されている. あと, タプルと配列もあるぞ.

## 整数

さっきの `0` みたいに値を「見たままの通りに書いたもの」を, なんちゃらリテラルっていうよ. `1` とか `23` とか `-42` とかは整数だから, 整数リテラルっていう.

こいつは `i32` (integer 32 bit, 32 ビット整数の略) って型の値を記述したんだ. `let` のとこにこの型を明示するとこう書くことになる.

```rust
let hoge: i32 = 0;
```

変数 `hoge` に入れるモノの型が `i32` だって分かりきってるので, `: i32` は省略できるってわけ.

じゃあなんで指定できるのかっていうと, 整数の型は `i32` だけじゃないのだ. 例えば `u32` (unsigned integer 32 bit, 32 ビット符号無し整数の略) って型もある.

`i32` との違いは, こっちでは負の数が表現できない. 負の数がありえないケースで使ったりするよ. リテラルで直接 `u32` にするときは, 後ろに `u32` を付けるだけでいい.

```rust
let a: u32 = 0;
let b = 1u32;
```

他にも `i8`, `usize`, `i64`, `u128` みたいな整数型が用意されてるよ. 表現できる数の範囲が違ったりするだけだから, 興味があったら調べてみてね.

あと, `_` で自由に桁区切りできるよ.

```rust
100_000_000;
5000_0000_0000_0000;
```

## 浮動小数点数

- `f32`
- `f64`

こいつらは浮動小数点数 (小数みたいなもの) を扱う型だよ. リテラルはこんな感じ. 小数をそのまま書くと `f64` になって, 後ろに `f32` を付ければ `F32` だよ.

```rust
let x = 2.0; // f64
let y: f32 = 3.0;
let z = 1.0f32;
```

## 真偽値

`true` か `false` どちらかの値しか取らない型として, `bool` があるよ.

```rust
let yes = true;
let no = false;
```

## 文字

単体の一文字 (厳密には UTF-8 スカラー値) を表現する型として `char` があるよ. C とは違って 8 ビットの整数ではないよ. 

```rust
let a = 'a';
let ah = 'あ';
let sigma = 'σ';
```

ASCII の範囲くらいの文字は `b` を頭につけることで文字コードのリテラルにできるよ. これは 8 ビットの整数だ.

```rust
let code_of_a = b'a'; // 97u8 と同じ
```

## タプル

複数の型をまとめた即席の型だよ. タプルから値を取り出すときは `.0`, `.1`, ... というように書くよ.

```rust
let tuple = (1, 4.0); // (i32, f64)
let first = tuple.0;
let second = tuple.1;
```

型は `(型1, 型2, ...)` というふうになるよ. 同じ型ばかりだとどれが何の意味なのかわからなくなるから, 使いすぎには気をつけよう.

また, 何も値が入っていない/入れるものがないときにゼロ要素のタプルを使うよ.

```rust
let nothing = ();
```

## 配列

同じ型の値が何個か連続した型を表現することもできるよ. 型 `T` が `N` 個だけ連なっている型は, `[T; N]` と表現するよ.

```rust
let arr = [
  1, 4, 2, 3, 5, 2, 3,
]; // [i32; 7]
let zeroes: [f64; 2] = [0.0, 0.0];
```

# まとめ

今回のまとめだよ.

- Rust は安全性を重視したシステムプログラミング言語.
- `main` 関数から始まる.
- 変数は `let` で作れるよ.
- 変数には値を入れられる.
- 値はリテラルを書くことで作れる.
- 値にはそれぞれ型がある.

ご視聴ありがとさん.

次回は, 「式と文と関数」だよ.

---

動画: Mikuro さいな
監修: かわえもん

参考文献:

- Rust (プログラミング言語) - Wikipedia https://ja.wikipedia.org/wiki/Rust_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E)
- Rust Programming Language https://www.rust-lang.org/
- The Rust Programming Language a.k.a. "The Book" https://doc.rust-lang.org/book/

---
